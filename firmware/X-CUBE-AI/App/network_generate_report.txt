ST Edge AI Core v2.2.0-20266 2adc00962
Created date          : 2025-12-09 17:48:14
Parameters            : generate --target stm32l4 --name network -m /home/bohdan/code/poc/human-activity-recognition/stm32-ai-activity-tracker/firmware/resources/trained-models/realworld-dataset/wl96-overlap50-acc-gyr/wl96-overlap50-acc-gyr.h5 --compression none --verbosity 1 --workspace /tmp/mxAI_workspace33160409976318474620474057132306 --output /home/bohdan/.stm32cubemx/network_output

Exec/report summary (generate)
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model file         :   /home/bohdan/code/poc/human-activity-recognition/stm32-ai-activity-tracker/firmware/resources/trained-models/realworld-dataset/wl96-overlap50-acc-gyr/wl96-overlap50-acc-gyr.h5   
type               :   keras                                                                                                                                                                             
c_name             :   network                                                                                                                                                                           
compression        :   none                                                                                                                                                                              
options            :   allocate-inputs, allocate-outputs                                                                                                                                                 
optimization       :   balanced                                                                                                                                                                          
target/series      :   stm32l4                                                                                                                                                                           
workspace dir      :   /tmp/mxAI_workspace33160409976318474620474057132306                                                                                                                               
output dir         :   /home/bohdan/.stm32cubemx/network_output                                                                                                                                          
model_fmt          :   float                                                                                                                                                                             
model_name         :   wl96overlap50accgyr                                                                                                                                                               
model_hash         :   0x5a366df422ee274826510637d20b039a                                                                                                                                                
params #           :   37,011 items (144.57 KiB)                                                                                                                                                         
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
input 1/1          :   'input_layer', f32(1x96x6), 2.25 KBytes, activations                                                                                                                              
output 1/1         :   'activation', f32(1x7), 28 Bytes, activations                                                                                                                                     
macc               :   1,278,960                                                                                                                                                                         
weights (ro)       :   145,948 B (142.53 KiB) (1 segment) / -2,096(-1.4%) vs float model                                                                                                                 
activations (rw)   :   17,280 B (16.88 KiB) (1 segment) *                                                                                                                                                
ram (total)        :   17,280 B (16.88 KiB) = 17,280 + 0 + 0                                                                                                                                             
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
(*) 'input'/'output' buffers are allocated in the activations buffer

Model name - wl96overlap50accgyr
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
m_id   layer (type,original)                                          oshape            param/size           macc                    connected to   | c_size            c_macc              c_type                        
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
0      input_layer (Input, InputLayer)                                [b:1,h:96,c:6]                                                                |                                       
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
1      batch_normalization (ScaleBias, BatchNormalization)            [b:1,h:96,c:6]    12/48               1,152                     input_layer   | -48(-100.0%)      -1,152(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
2      conv1d_conv2d (Conv2D, Conv1D)                                 [b:1,h:92,c:32]   992/3,968          88,352             batch_normalization   | -3,968(-100.0%)   -88,352(-100.0%)    
       conv1d (Nonlinearity, Conv1D)                                  [b:1,h:92,c:32]                       2,944                   conv1d_conv2d   |                   -2,944(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
3      max_pooling1d (Pool, MaxPooling1D)                             [b:1,h:46,c:32]                       2,944                          conv1d   | +3,968(+100.0%)   +91,296(+3101.1%)   Conv2D_[0]                    
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
4      batch_normalization_1 (ScaleBias, BatchNormalization)          [b:1,h:46,c:32]   64/256              2,944                   max_pooling1d   | -256(-100.0%)     -2,944(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
5      conv1d_1_conv2d (Conv2D, Conv1D)                               [b:1,h:42,c:64]   10,304/41,216     430,144           batch_normalization_1   |                   +2,688(+0.6%)       Conv2D_/Nonlinearity_[1, 2]   
       conv1d_1 (Nonlinearity, Conv1D)                                [b:1,h:42,c:64]                       2,688                 conv1d_1_conv2d   |                   -2,688(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
6      batch_normalization_2 (ScaleBias, BatchNormalization)          [b:1,h:42,c:64]   128/512             5,376                        conv1d_1   | -512(-100.0%)     -5,376(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
7      conv1d_2_conv2d (Conv2D, Conv1D)                               [b:1,h:40,c:96]   18,528/74,112     737,376           batch_normalization_2   |                   +3,840(+0.5%)       Conv2D_/Nonlinearity_[3, 4]   
       conv1d_2 (Nonlinearity, Conv1D)                                [b:1,h:40,c:96]                       3,840                 conv1d_2_conv2d   |                   -3,840(-100.0%)     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
8      global_average_pooling1d_pool (Pool, GlobalAveragePooling1D)   [b:1,h:1,c:96]                        3,840                        conv1d_2   |                                       Pool_[5]                      
       global_average_pooling1d (Reshape, GlobalAveragePooling1D)     [b:1,c:96]                                    global_average_pooling1d_pool   |                                       
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
10     batch_normalization_3 (ScaleBias, BatchNormalization)          [b:1,c:96]        192/768               192        global_average_pooling1d   | -768(-100.0%)     -192(-100.0%)       
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
11     dense_dense (Dense, Dense)                                     [b:1,c:64]        6,208/24,832        6,208           batch_normalization_3   |                   +64(+1.0%)          Dense_/Nonlinearity_[6, 7]    
       dense (Nonlinearity, Dense)                                    [b:1,c:64]                               64                     dense_dense   |                   -64(-100.0%)        
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
12     batch_normalization_4 (ScaleBias, BatchNormalization)          [b:1,c:64]        128/512               128                           dense   | -512(-100.0%)     -128(-100.0%)       
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
13     dense_1 (Dense, Dense)                                         [b:1,c:7]         455/1,820             455           batch_normalization_4   |                                       Dense_[8]                     
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
14     activation (Nonlinearity, Activation)                          [b:1,c:7]                               105                         dense_1   |                                       Nonlinearity_[o][9]           
------ -------------------------------------------------------------- ----------------- --------------- --------- ------------------------------- --- ----------------- ------------------- ----------------------------- 
model/c-model: macc=1,288,752/1,278,960 -9,792(-0.8%) weights=148,044/145,948 -2,096(-1.4%) activations=--/17,280 io=--/0



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : wl96overlap50accgyr
c-name                : network
c-node #              : 10
c-array #             : 25
activations size      : 17280 (1 segment)
weights size          : 145948 (1 segment)
macc                  : 1278960
inputs                : ['input_layer_output']
outputs               : ['activation_output']

C-Arrays (25)
------ -------------------------------------- ------------- ------------------------- ------------- --------- 
c_id   name (*_array)                         item/size     domain/mem-pool           c-type        comment   
------ -------------------------------------- ------------- ------------------------- ------------- --------- 
0      activation_output                      7/28          activations/**default**   float         /output   
1      conv1d_1_conv2d_bias                   64/256        weights/weights           const float             
2      conv1d_1_conv2d_output                 2688/10752    activations/**default**   float                   
3      conv1d_1_conv2d_scratch0               160/640       activations/**default**   float                   
4      conv1d_1_conv2d_weights                10240/40960   weights/weights           const float             
5      conv1d_1_output                        2688/10752    activations/**default**   float                   
6      conv1d_2_conv2d_bias                   96/384        weights/weights           const float             
7      conv1d_2_conv2d_output                 3840/15360    activations/**default**   float                   
8      conv1d_2_conv2d_scratch0               192/768       activations/**default**   float                   
9      conv1d_2_conv2d_weights                18432/73728   weights/weights           const float             
10     conv1d_2_output                        3840/15360    activations/**default**   float                   
11     conv1d_conv2d_bias                     32/128        weights/weights           const float             
12     conv1d_conv2d_output                   1472/5888     activations/**default**   float                   
13     conv1d_conv2d_scratch0                 30/120        activations/**default**   float                   
14     conv1d_conv2d_scratch1                 64/256        activations/**default**   float                   
15     conv1d_conv2d_weights                  960/3840      weights/weights           const float             
16     dense_1_bias                           7/28          weights/weights           const float             
17     dense_1_output                         7/28          activations/**default**   float                   
18     dense_1_weights                        448/1792      weights/weights           const float             
19     dense_dense_bias                       64/256        weights/weights           const float             
20     dense_dense_output                     64/256        activations/**default**   float                   
21     dense_dense_weights                    6144/24576    weights/weights           const float             
22     dense_output                           64/256        activations/**default**   float                   
23     global_average_pooling1d_pool_output   96/384        activations/**default**   float                   
24     input_layer_output                     576/2304      activations/**default**   float         /input    
------ -------------------------------------- ------------- ------------------------- ------------- --------- 

C-Layers (10)
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
c_id   name (*_layer)                  id   layer_type      macc     rom     tensors                                   shape (array id)     
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
0      conv1d_conv2d                   3    Conv2D          94240    3968    I: input_layer_output                     f32(1x96x6) (24)     
                                                                             S: conv1d_conv2d_scratch0                                      
                                                                             S: conv1d_conv2d_scratch1                                      
                                                                             W: conv1d_conv2d_weights                  f32(32x5x1x6) (15)   
                                                                             W: conv1d_conv2d_bias                     f32(32) (11)         
                                                                             O: conv1d_conv2d_output                   f32(1x46x32) (12)    
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
1      conv1d_1_conv2d                 5    Conv2D          430144   41216   I: conv1d_conv2d_output                   f32(1x46x32) (12)    
                                                                             S: conv1d_1_conv2d_scratch0                                    
                                                                             W: conv1d_1_conv2d_weights                f32(64x5x1x32) (4)   
                                                                             W: conv1d_1_conv2d_bias                   f32(64) (1)          
                                                                             O: conv1d_1_conv2d_output                 f32(1x42x64) (2)     
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
2      conv1d_1                        5    Nonlinearity    2688     0       I: conv1d_1_conv2d_output                 f32(1x42x64) (2)     
                                                                             O: conv1d_1_output                        f32(1x42x64) (5)     
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
3      conv1d_2_conv2d                 7    Conv2D          737376   74112   I: conv1d_1_output                        f32(1x42x64) (5)     
                                                                             S: conv1d_2_conv2d_scratch0                                    
                                                                             W: conv1d_2_conv2d_weights                f32(96x3x1x64) (9)   
                                                                             W: conv1d_2_conv2d_bias                   f32(96) (6)          
                                                                             O: conv1d_2_conv2d_output                 f32(1x40x96) (7)     
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
4      conv1d_2                        7    Nonlinearity    3840     0       I: conv1d_2_conv2d_output                 f32(1x40x96) (7)     
                                                                             O: conv1d_2_output                        f32(1x40x96) (10)    
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
5      global_average_pooling1d_pool   8    Pool            3840     0       I: conv1d_2_output                        f32(1x40x96) (10)    
                                                                             O: global_average_pooling1d_pool_output   f32(1x1x96) (23)     
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
6      dense_dense                     11   Dense           6208     24832   I: global_average_pooling1d_pool_output   f32(1x1x96) (23)     
                                                                             W: dense_dense_weights                    f32(64x96) (21)      
                                                                             W: dense_dense_bias                       f32(64) (19)         
                                                                             O: dense_dense_output                     f32(1x64) (20)       
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
7      dense                           11   Nonlinearity    64       0       I: dense_dense_output                     f32(1x64) (20)       
                                                                             O: dense_output                           f32(1x64) (22)       
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
8      dense_1                         13   Dense           455      1820    I: dense_output                           f32(1x64) (22)       
                                                                             W: dense_1_weights                        f32(7x64) (18)       
                                                                             W: dense_1_bias                           f32(7) (16)          
                                                                             O: dense_1_output                         f32(1x7) (17)        
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 
9      activation                      14   Nonlinearity    105      0       I: dense_1_output                         f32(1x7) (17)        
                                                                             O: activation_output                      f32(1x7) (0)         
------ ------------------------------- ---- --------------- -------- ------- ----------------------------------------- -------------------- 



Number of operations per c-layer
------- ------ -------------------------------------- ----------- -------------- 
c_id    m_id   name (type)                                    #op           type 
------- ------ -------------------------------------- ----------- -------------- 
0       3      conv1d_conv2d (Conv2D)                      94,240   smul_f32_f32 
1       5      conv1d_1_conv2d (Conv2D)                   430,144   smul_f32_f32 
2       5      conv1d_1 (Nonlinearity)                      2,688     op_f32_f32 
3       7      conv1d_2_conv2d (Conv2D)                   737,376   smul_f32_f32 
4       7      conv1d_2 (Nonlinearity)                      3,840     op_f32_f32 
5       8      global_average_pooling1d_pool (Pool)         3,840   smul_f32_f32 
6       11     dense_dense (Dense)                          6,208   smul_f32_f32 
7       11     dense (Nonlinearity)                            64     op_f32_f32 
8       13     dense_1 (Dense)                                455   smul_f32_f32 
9       14     activation (Nonlinearity)                      105     op_f32_f32 
------- ------ -------------------------------------- ----------- -------------- 
total                                                   1,278,960 

Number of operation types
---------------- ----------- ----------- 
operation type             #           % 
---------------- ----------- ----------- 
smul_f32_f32       1,272,263       99.5% 
op_f32_f32             6,697        0.5% 

Complexity report (model)
------ ------------------------------- ------------------------- ------------------------- -------- 
m_id   name                            c_macc                    c_rom                     c_id     
------ ------------------------------- ------------------------- ------------------------- -------- 
3      max_pooling1d                   ||                 7.4%   |                  2.7%   [0]      
5      conv1d_1_conv2d                 |||||||||         33.8%   |||||||||         28.2%   [1, 2]   
7      conv1d_2_conv2d                 ||||||||||||||||  58.0%   ||||||||||||||||  50.8%   [3, 4]   
8      global_average_pooling1d_pool   |                  0.3%   |                  0.0%   [5]      
11     dense_dense                     |                  0.5%   ||||||            17.0%   [6, 7]   
13     dense_1                         |                  0.0%   |                  1.2%   [8]      
14     activation                      |                  0.0%   |                  0.0%   [9]      
------ ------------------------------- ------------------------- ------------------------- -------- 
macc=1,278,960 weights=145,948 act=17,280 ram_io=0
 
 Requested memory size by section - "stm32l4" target
 ------------------------------ -------- --------- ------- -------- 
 module                             text    rodata    data      bss 
 ------------------------------ -------- --------- ------- -------- 
 NetworkRuntime1020_CM4_GCC.a     13,624         0       0        0 
 network.o                           744        80   3,232      240 
 network_data.o                       48        16      88        0 
 lib (toolchain)*                    614        24       0        0 
 ------------------------------ -------- --------- ------- -------- 
 RT total**                       15,030       120   3,320      240 
 ------------------------------ -------- --------- ------- -------- 
 weights                               0   145,952       0        0 
 activations                           0         0       0   17,280 
 io                                    0         0       0        0 
 ------------------------------ -------- --------- ------- -------- 
 TOTAL                            15,030   146,072   3,320   17,520 
 ------------------------------ -------- --------- ------- -------- 
 *  toolchain objects (libm/libgcc*)
 ** RT AI runtime objects (kernels+infrastructure)
  
  Summary - "stm32l4" target
  ---------------------------------------------------
               FLASH (ro)      %*   RAM (rw)       % 
  ---------------------------------------------------
  RT total         18,470   11.2%      3,560   17.1% 
  ---------------------------------------------------
  TOTAL           164,422             20,840         
  ---------------------------------------------------
  *  rt/total


Generated files (7)
---------------------------------------------------------------- 
/home/bohdan/.stm32cubemx/network_output/network_data_params.h   
/home/bohdan/.stm32cubemx/network_output/network_data_params.c   
/home/bohdan/.stm32cubemx/network_output/network_data.h          
/home/bohdan/.stm32cubemx/network_output/network_data.c          
/home/bohdan/.stm32cubemx/network_output/network_config.h        
/home/bohdan/.stm32cubemx/network_output/network.h               
/home/bohdan/.stm32cubemx/network_output/network.c               
